<template>
  <lightning-card title="AI 디자인 파트너 추천" icon-name="custom:custom63">
    <div class="slds-p-horizontal_medium">
      <!-- Opportunity 정보 표시 -->
      <div if:true={opportunity.data} class="slds-m-bottom_medium">
        <p><strong>프로젝트:</strong> {opportunityName}</p>
        <p><strong>고객사:</strong> {accountName}</p>
        <p><strong>프로젝트 타입:</strong> {projectType}</p>
        <p><strong>단계:</strong> {stageName}</p>
      </div>

      <!-- 추천 받기 버튼 -->
      <lightning-button
        variant="brand"
        label="AI 추천 받기"
        title="AI 추천 받기"
        onclick={handleGetRecommendation}
        disabled={isLoading}
      >
      </lightning-button>

      <!-- 로딩 스피너 -->
      <div if:true={isLoading} class="slds-m-top_medium">
        <lightning-spinner
          alternative-text="Loading"
          size="medium"
        ></lightning-spinner>
      </div>

      <!-- 오류 메시지 표시 -->
      <div if:true={error} class="slds-m-top_medium">
        <div class="slds-box slds-theme_error">
          <p class="slds-text-color_error">
            <lightning-icon
              icon-name="utility:error"
              size="small"
              class="slds-m-right_x-small"
            ></lightning-icon>
            {error}
          </p>
        </div>
      </div>

      <!-- AI 추천 결과 표시 -->
      <div if:true={showRecommendation} class="slds-m-top_medium">
        <div class="slds-box slds-theme_shade">
          <h3 class="slds-text-heading_small slds-m-bottom_small">
            <strong>추천 결과</strong>
          </h3>
          <div class="slds-p-left_large">
            <pre class="recommendation-content">{recommendation}</pre>
          </div>
        </div>
      </div>
    </div>
  </lightning-card>
</template>
